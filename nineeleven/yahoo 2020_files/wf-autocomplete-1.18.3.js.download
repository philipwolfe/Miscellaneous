!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-autocomplete",[],t):"object"==typeof exports?exports["wafer-autocomplete"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-autocomplete"]=t())}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n=window.webpackJsonpwafer_wafers_wafer_autocomplete;window.webpackJsonpwafer_wafers_wafer_autocomplete=function(t,i,r){for(var s,o,l=0,u=[];l<t.length;l++)o=t[l],a[o]&&u.push(a[o][0]),a[o]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);for(n&&n(t,i,r);u.length;)u.shift()()};var i={},a={1:0,2:0};return t.e=function(e){function n(){o.onerror=o.onload=null,clearTimeout(l);var t=a[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),a[e]=void 0)}var i=a[e];if(0===i)return new Promise(function(e){e()});if(i)return i[2];var r=new Promise(function(t,n){i=a[e]=[t,n]});i[2]=r;var s=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.timeout=12e4,t.nc&&o.setAttribute("nonce",t.nc),o.src=t.p+"wf-autocomplete-1.18.3-"+{0:"a6094d57ea"}[e]+".chunk.js";var l=setTimeout(n,12e4);return o.onerror=o.onload=n,s.appendChild(o),r},t.m=e,t.c=i,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="https://s.yimg.com/aaq/wf/",t.oe=function(e){throw e},t(t.s="./src/entry.js")}({"./src/assist.js":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=window.wafer.constants,c=u.ATTR_PREFIX,d=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.selector;a(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{selector:i})),o=e.getAttribute(c+"ac-target"),u=e.getAttribute(c+"ac-url"),d=e.getAttribute(c+"ac-template"),f=e.getAttribute(c+"ac-placeholder-template"),h=e.getAttribute(c+"ac-number-of-placeholders")||0,p=e.getAttribute(c+"ac-sync-on-search");if(!o||!u)return r(s);var v=e.getAttribute(c+"ac-boundary"),y=e.getAttribute(c+"ac-submit-on-enter"),m=e.getAttribute(c+"ac-timeout"),b=e.getAttribute(c+"ac-type")||"gossip";return s._util=l({},s._util,{boundary:v,submitOnEnter:null===y||void 0===y?1:Number(y),target:o,type:b,url:u,placeholder:f,numPlaceholders:h,template:d,syncOnSearch:p,timeout:null===m||void 0===m?6e3:Number(m)}),s.createListElem(),s.addEventListeners(),s}return s(t,e),t}((o||function(){return o=i(n("./src/assistBase.js"))}()).default);t.default=d,e.exports=t.default},"./src/assistBase.js":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=window.wafer,o=s.base,l=s.utils,u=l.bindEvent,c=l.convertNodeListToArray,d=l.fetchWithCache,f=l.findAncestor,h=l.unbindEvent,p=["handleListClick","handleListKeyDown"],v=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.errorClass,s=a.successClass,o=a.selector;i(this,e);var l=t.getAttribute("id");this._util={elem:t,errorClass:r,id:l,selector:o,successClass:s},this._state={active:!1,listOpen:!1,originalTerm:"",placeholdersVisible:!1,term:""},p.forEach(function(e){n[e]=n[e].bind(n)}),this.addAriaRolesToInput()}return r(e,[{key:"addAriaRolesToInput",value:function(){var e=this._util,t=e.elem,n=(e.type,e.id);n&&t.setAttribute("aria-controls",n+"-list")}},{key:"addEventListeners",value:function(){var e=this,t=this._util,i=t.type,a=t.targetElem;o.__assist=o.__assist||{};var r=o.__assist[i];if(r){var s=r.getListMarkup;this.getListMarkup=s.bind(this)}else new Promise(function(e){n.e(0).then(function(t){e(n("./src/types recursive ^\\.\\/.*$")("./"+i))}.bind(null,n)).catch(n.oe)}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getListMarkup;o.__assist[i]={getListMarkup:n},e.getListMarkup=n.bind(e)}).catch(function(e){});u(a,"click",this.handleListClick,{passive:!1}),u(a,"keydown",this.handleListKeyDown,{passive:!1})}},{key:"removeEventListeners",value:function(){var e=this._util.targetElem;h(e,"click",this.handleListClick,{passive:!1}),u(e,"keydown",this.handleListKeyDown,{passive:!1})}},{key:"updateInputValue",value:function(e){this._util.elem.value=e.getAttribute("data-display-value")||e.innerText||e.textContent}},{key:"getPlaceholders",value:function(){for(var e=this._util,t=e.listElem,n=e.placeholderElem,i=e.numPlaceholders,a=document.createDocumentFragment(),r=0;r<i;r++){var s=document.createElement("li");s.setAttribute("tabindex",0),s.setAttribute("role","presentation"),s.innerHTML=n.innerHTML,a.appendChild(s)}return t.appendChild(a),t}},{key:"getSuggestions",value:function(){var t=this,n=this._util,i=n.elem,a=n.targetElem,r=n.numPlaceholders,s=this._util,l=s.url,u=s.syncOnSearch,c=void 0!==u&&u;if(!(l&&a&&this.getListMarkup&&this._state.active))return!1;var f=this._util,h=f.errorClass,p=f.timeout,v=i.value.toLowerCase();if(i.classList.remove(h),this.clearAttributes(),!v)return this.clear(),!1;var y=this._state.woeid;if(y&&(l=l+"&woeid="+y),r>0&&!this._state.listOpen){var m=this.getPlaceholders();this._state.listOpen=!0,this._state.placeholdersVisible=!0,this.showList(),a.appendChild(m)}d(l.replace("{term}",v),{cache:1,cacheStrategy:"cacheFirst",timeout:p,useRid:0}).then(function(e){var n=t._util.listElem;o.destroy(n);var i=t.getListMarkup(e,v);return i.children.length?(t._state.placeholdersVisible=!1,t._state.listOpen=!0,t.showList()):(t._state.listOpen=!1,t.hideList()),a.appendChild(i),o.syncAssets(e.assets),c&&o.sync(a),!0}).catch(function(n){return t._state.placeholdersVisible&&t.clear(),o.emitError({name:e.name,elem:i,meta:{url:l},stack:n.stack}),i.classList.add(h),!1})}},{key:"createListElem",value:function(){var e=this._util,t=e.boundary,n=e.elem,i=e.id,a=e.target,r=e.placeholder,s=e.numPlaceholders,o=a&&(t&&f(n,t)||document.body).querySelector(a),l=c(o.getElementsByClassName("wafer-autocomplete-list"))[0];l||(l=document.createElement("ul"),l.classList.add("wafer-autocomplete-list")),l.setAttribute("role","listbox"),i&&l.setAttribute("id",i+"-list"),this._util.targetElem=o,this._util.listElem=l,r&&s&&(this._util.placeholderElem=document.getElementById(r))}},{key:"showList",value:function(e){e=e||this._util.listElem,e.style.opacity="1",e.classList.add("wafer-autocomplete-list-active")}},{key:"hideList",value:function(e){e=e||this._util.listElem,e.style.opacity="0",e.classList.remove("wafer-autocomplete-list-active")}},{key:"clearAttributes",value:function(){var e=this._util.elem;e.setAttribute("data-display-value",""),e.setAttribute("data-user-input",""),e.setAttribute("data-value","")}},{key:"clear",value:function(){var e=this,t=this._util.elem;this._state.active=!1,this._state.listOpen=!1,this._state.placeholdersVisible=!1,this._state.term=this._state.originalTerm="",t.classList.remove("wafer-autocomplete-did-submit"),this.hideList(),setTimeout(function(){var t=e._util.listElem;o.destroy(t),t.innerHTML=""},100)}},{key:"submit",value:function(){var e=this._util.elem;e.classList.add("wafer-autocomplete-did-submit"),this.hideList(),this.didComplete(null,e.getAttribute("data-value")||e.value.toLowerCase())}},{key:"handleListItemSelect",value:function(e,t){if(e.classList.contains("delete-button")){var n=f(e,"wafer-autocomplete-item"),i=n.getAttribute("data-value"),a=this._util,r=a.assistData,s=a.listElem,o=a.saveLocationUrl,l=a.unifiedGeo,u=c(s.children);return t&&t.preventDefault(),n.parentNode.removeChild(n),u.length<=1&&this.clear(!0),void(i&&r&&l&&(r.removeSavedLocation(i),d(o,{body:JSON.stringify({requests:{g0:{resource:"WeatherLocationService.favoriteLocation",operation:"delete",params:{woeid:i,term:this._state.term}}}})}).catch(function(e){})))}if(e.classList.contains("wafer-autocomplete-item")){this.updateInputValue(e);var h=this._util,p=h.assistData,v=h.elem,y=h.saveLocationUrl,m=h.unifiedGeo,b=this._state.term;this._state.term=this._state.originalTerm=v.value;var _=e.getAttribute("data-value");_&&(v.setAttribute("data-user-input",b),v.setAttribute("data-value",_),m&&p&&!p.isSavedLocation(_)&&(p.addSavedLocationUsingwoeid(_),d(y,{body:JSON.stringify({requests:{g0:{resource:"WeatherLocationService.favoriteLocation",operation:"create",params:{woeid:_,term:b}}}})}).catch(function(e){}))),this.clear(!0),this.submit()}}},{key:"stateDidUpdate",value:function(){}},{key:"destroy",value:function(){this.removeEventListeners()}},{key:"handleSelect",value:function(){this.getSuggestions()}},{key:"handleListClick",value:function(e){this.handleListItemSelect(e.target)}},{key:"handleInputKeydown",value:function(){var e=this._util.listElem,t=c(e.children),n=a(t,1),i=n[0];i&&(this.updateInputValue(i),i.focus())}},{key:"handleListDown",value:function(e){e.preventDefault();var t=this._util,n=t.elem,i=t.listElem,a=c(i.children),r=a.indexOf(e.target);if(r===a.length-1)return n.value=this._state.originalTerm,void n.focus();var s=a[r+1];this.updateInputValue(s),s.focus()}},{key:"handleInputKeyup",value:function(){var e=this._util.listElem,t=c(e.children),n=t[t.length-1];n&&(this.updateInputValue(n),n.focus())}},{key:"handleListUp",value:function(e){e.preventDefault();var t=this._util,n=t.elem,i=t.listElem,a=c(i.children),r=a.indexOf(e.target);if(0===r)return n.value=this._state.originalTerm,void n.focus();var s=a[r-1];this.updateInputValue(s),s.focus()}},{key:"handleListKeyDown",value:function(e){switch(e.which||e.code){case 13:this.handleListItemSelect(e.target,e);break;case 27:this._state.active=!1,this._util.elem.value=this._state.originalTerm||"",this.clearAttributes(),this.clear(),this._util.elem.focus();break;case 38:this.handleListUp(e);break;case 40:this.handleListDown(e)}}},{key:"handleKeyup",value:function(e){}},{key:"handleKeydown",value:function(e){var t=e.which||e.code,n=this._util,i=n.elem,a=n.submitOnEnter;switch(i.classList.remove("wafer-autocomplete-did-submit"),this._state.active=!0,this._state.term=i.value,t){case 13:this._state.originalTerm=this._state.term,a&&this.submit();break;case 27:this._state.active=!1,this.clearAttributes(),this.clear();break;case 8:this._state.originalTerm=this._state.term,this.getSuggestions();break;case 38:this.handleInputKeyup(e);break;case 40:this.handleInputKeydown(e);break;default:this._state.originalTerm=this._state.term,this.getSuggestions()}}},{key:"handleOnfocus",value:function(e){this._state.active=!0,this.clearOthers()}},{key:"handleOnfocusOut",value:function(e){this._state.active=!1}},{key:"handleClickOutside",value:function(e){if(this._state.listOpen){var t=this._util,n=t.elem,i=t.listElem,a=e.waferComposedMap();a.get(n)||a.get(i)||(this._state.active=!1,this.clear())}}}]),e}();t.default=v,e.exports=t.default},"./src/base.js":function(e,t,n){"use strict";function i(){return u=r(n("./src/assist.js"))}function a(){return c=r(n("./src/locationPicker.js"))}function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var s=a.get;if(void 0!==s)return s.call(i)},h=["lp-woeid"],p=window.wafer,v=p.WaferBaseClass,y=p.utils,m=y.debounce,b=["handleSelect","handleOnfocus","handleOnfocusOut"],_=["handleKeydown","handleKeyup"],w=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.errorClass,l=n.successClass,d=n.selector;s(this,t);var p=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{selector:d},{STATE_ATTRS:h}));e.classList.contains("wafer-location-picker")?p._instance=new((c||a()).default)(e,{errorClass:r,successClass:l,selector:d}):p._instance=new((u||i()).default)(e,{errorClass:r,successClass:l,selector:d}),b.forEach(function(e){p[e]=p[e].bind(p)}),_.forEach(function(e){p[e+"Debounce"]=m(p[e],300,p)});var v=p;return p._instance.clearOthers=function(){v.clearOthers.call(this)},p._instance.didComplete=function(e,t){p.didComplete(e,t)},f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListeners",p).call(p),p}return l(t,e),d(t,[{key:"stateDidUpdate",value:function(){this._instance.stateDidUpdate(this._util)}},{key:"destroy",value:function(){this._instance.destroy()}},{key:"clear",value:function(e){this._instance.clear(e)}},{key:"removeEventListeners",value:function(){this._instance.removeEventListeners()}},{key:"handleSelect",value:function(e){this._instance.handleSelect.call(this._instance,e)}},{key:"handleKeydown",value:function(e){this._instance.handleKeydown.call(this._instance,e)}},{key:"handleKeyup",value:function(e){this._instance.handleKeyup.call(this._instance,e)}},{key:"handleOnfocus",value:function(e){this._instance.handleOnfocus.call(this._instance,e)}},{key:"handleOnfocusOut",value:function(e){this._instance.handleOnfocusOut.call(this._instance,e)}},{key:"handleClickOutside",value:function(e){this._instance.handleClickOutside.call(this._instance,e)}}]),t}(v);w.events={click:[["wafer-autocomplete","handleSelect"]],focusin:[["_self","handleOnfocus"]],focusout:[["_self","handleOnfocusOut"]],keydown:[["_self","handleKeydownDebounce"]],keyup:[["_self","handleKeyupDebounce"]]},t.default=w,e.exports=t.default},"./src/controller.js":function(e,t,n){"use strict";function i(){return l=a(n("./src/base.js"))}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,u=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=window.wafer.controllers.WaferBaseController,d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.errorClass,a=void 0===n?"wafer-autocomplete-error":n,o=e.root,c=void 0===o?document:o,d=e.selector,f=void 0===d?"wafer-autocomplete":d,h=e.successClass,p=void 0===h?"wafer-autocomplete-complete":h;r(this,t);var v=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{root:c,selector:f,props:{errorClass:a,selector:f,successClass:p},WaferClass:(l||i()).default})),y=v;return(l||i()).default.prototype.clearOthers=function(){var e=this._util.elem,t=y._state.elementInstances,n=!0,i=!1,a=void 0;try{for(var r,s=t.entries()[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=u(r.value,2),l=o[0],c=o[1];l!==e&&c.instance.clear()}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}},v.sync(),v}return o(t,e),t}(c);t.default=d,e.exports=t.default},"./src/data.js":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.locations=[],this.savedLocationsUuidMapping={},this.savedLocationsUuids=[]}return a(e,[{key:"addLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.woeid;this.locations[t+""]=e}},{key:"addSavedLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.woeid;t+="",this.savedLocationsUuidMapping[t]=e,this.savedLocationsUuids.push(t)}},{key:"isSavedLocation",value:function(e){return this.savedLocationsUuidMapping[e]}},{key:"removeSavedLocation",value:function(e){this.savedLocationsUuidMapping[e]={},delete this.savedLocationsUuidMapping[e];var t=this.savedLocationsUuids.indexOf(e);-1!==t&&this.savedLocationsUuids.splice(t,1)}},{key:"addSavedLocationUsingwoeid",value:function(e){var t=this.locations[e];this.savedLocationsUuidMapping[e]=t,this.savedLocationsUuids.unshift(e)}}]),e}();t.default=r,e.exports=t.default},"./src/entry.js":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a;t.default=new((a||function(){return a=i(n("./src/controller.js"))}()).default)({selector:".wafer-autocomplete"}),e.exports=t.default},"./src/locationPicker.js":function(e,t,n){"use strict";function i(){return u=a(n("./src/data.js"))}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,u,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in a)return a.value;var s=a.get;if(void 0!==s)return s.call(i)},h=window.wafer,p=h.base,v=h.constants,y=h.utils,m=v.ATTR_PREFIX,b=y.fetchWithCache,_=y.getTemplateContent,w=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(n.errorClass,n.successClass,n.selector);r(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{selector:a})),l=e.getAttribute(m+"lp-target"),d=e.getAttribute(m+"lp-url");if(!l||!d)return s(o);var f=document.getElementById("wafer-autocomplete-delete-button"),h=f&&_(f),p=e.getAttribute(m+"lp-boundary"),v=e.getAttribute(m+"lp-saved-url"),y=e.getAttribute(m+"lp-submit-on-enter"),b=e.getAttribute(m+"lp-timeout"),w=e.getAttribute(m+"lp-type")||"weather",g=e.getAttribute(m+"lp-woeid"),O=e.getAttribute(m+"lp-unified-geo");return o._util=c({},o._util,{assistData:new((u||i()).default),boundary:p,deleteButtonText:h,saveLocationUrl:v,submitOnEnter:null===y||void 0===y?1:Number(y),target:l,type:w,unifiedGeo:null===O||void 0===O?0:Number(O),url:d,timeout:null===b||void 0===b?6e3:Number(b)}),o._state=c({},o._state,{woeid:g}),o.createListElem(),o.addEventListeners(),o.fetchAndRenderSavedLocations(),o}return o(t,e),d(t,[{key:"fetchAndRenderSavedLocations",value:function(){var e=this,t=this._util,n=t.assistData,i=t.elem,a=t.saveLocationUrl,r=t.timeout;a&&b(a,{cache:1,cacheStrategy:"networkFirst",timeout:r,useRid:0}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.data,a=void 0===i?[]:i;return n&&a.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.addSavedLocation(e)}),e.renderSavedLocation(),!0}).catch(function(e){return p.emitError({name:"WaferAutoComplete",elem:i,meta:{url:a},stack:e.stack}),!1})}},{key:"renderSavedLocation",value:function(){var e=this._util,t=e.assistData,n=e.deleteButtonText,i=e.listElem,a=e.targetElem,r=document.createDocumentFragment();if(!t.savedLocationsUuids.length)return void this.clear(!0);t.savedLocationsUuids.forEach(function(e){var i=t.savedLocationsUuidMapping[e]||{},a=i.qualifiedName;if(a){var s=document.createElement("li");s.classList.add("wafer-autocomplete-item","wafer-autocomplete-saved-item"),s.setAttribute("tabindex",0),s.setAttribute("role","presentation"),s.setAttribute("data-value",e),s.innerHTML=a,n&&(s.innerHTML+=n),r.appendChild(s)}}),p.destroy(i),i.innerHTML="",i.appendChild(r),this._state.active=!0,this.showList(),a.appendChild(i)}},{key:"submit",value:function(){var e=this._util.elem,t=e.getAttribute("data-value")||e.value.toLowerCase();e.classList.add("wafer-autocomplete-did-submit"),this._state.woeid=t,this.hideList(),this.didComplete(null,t)}},{key:"stateDidUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e["lp-woeid"];t&&(this._state.woeid=t)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return void this.renderSavedLocation();f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clear",this).call(this,e)}}]),t}((l||function(){return l=a(n("./src/assistBase.js"))}()).default);t.default=w,e.exports=t.default}})});