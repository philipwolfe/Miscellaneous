//Copyright (C) 1999-2000 AlphaBlox Corporation, Inc. All rights reserved.
function stringExpression(Z,Y,X,W){if(X){X.built=false;X.derived=null;}if(Z.length>0){if(W==null)stringExpression.iteration=0;else++stringExpression.iteration;var V=Y+'#'+stringExpression.iteration;var U=null,T=null,S=null;var R=Z.match(/^(.*)=(\w+\(.*\)\S*)(.*)$/i);if(R==null)R=Z.match(/^(.*)=(\(.*\)\S*)(.*)$/i);if(R==null){R=Z.match(/^(.*)=(\d+\S*)(.*)$/i);if(R&&R[2] &&R[2].match(/\d+\w+/))R=null;}if(R==null){var Q=new Object();if(urlString(Z,Q)){S="__link(\""+Q.url+"\")";U=Q.pre;T=Q.post;}else return false;}else{var P=compiler(R[2],"",true);if(P!=null&&P.error!=null&&P.lastIndex>0&&P.lastIndex<=P.count){R[2] +=R[3];R[3]=R[2].slice(P.lastIndex-1,R[2].length);R[2]=R[2].slice(0,P.lastIndex-1);}U=R[1];T=R[3];if(X!=null){if(P.error==null){S=P.canon;X.raw="="+P.text;X.refer=P.refer;if(P.formatHint)X.formatHint=P.formatHint;if(P.alignHint)X.alignHint=P.alignHint;}else{S=P.force;X.tooltip=P.error.tooltip?P.error.tooltip:"unknown error";X.derived=P.error.error?P.error.error:"[error]";}}}if(X!=null){X.id=V;X.dynamic=S;if(U==null||U=="")X.pre="";else{X.pre=new Object();if(!stringExpression(U,Y,X.pre,true))X.pre=U;}if(T==null||T=="")X.post="";else{X.post=new Object();if(!stringExpression(T,Y,X.post,true))X.post=T;}}return true;}return false;}function resolveExpression(Z){if(Z==null)return"";if(typeof(Z)=="string")return Z;if(!Z.built||Z.derived==null)Z.derived=evalExpression(Z);return resolveExpression(Z.pre)+Z.derived+resolveExpression(Z.post);}function evalExpression(Z){if(Z==null||Z.dynamic==null||Z.dynamic=="")return"";var Y=runtime(Z.dynamic,Z.id,presentationResource);if(Z.resourceCount==null)Z.resourceCount=runtimeResourceCount();if(Y==null)Y=0;if(typeof Y=="object"&&Y.constructor==Array)Y=Y[0];if(Y.error)Y=Y.error;else Y=formatValue(Z,Y);return(Y+"");}function findExpression(Z,Y){if(Z&&(typeof(Z)=="object") &&(Z.id==Y))return Z;var X;if(Z.pre){X=findExpression(Z.pre,Y);if(X)return X;}if(Z.post){X=findExpression(Z.post,Y);if(X)return X;}}function presentationResource(Z){var Y=(Z.split("#"))[0];var X=index2model(Y);if(X==null||X._expression==null)return;var W=findExpression(X._expression,Z);if(W){if( --W.resourceCount>0)return;W.built=true;delete(W.resourceCount);delete(W.derived);}deriveModel(X,true);doChangedModel(X);}var gResourceChangeTimer=null;function doChangedModel(Z){changedModel(Z,true);}function name2cell(Z){return null;}if(typeof JSIncludeDoneLoading!="undefined")JSIncludeDoneLoading();